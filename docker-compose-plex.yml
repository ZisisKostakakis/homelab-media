services:
  plex:
    image: lscr.io/linuxserver/plex
    container_name: plex
    network_mode: host
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/London
      - VERSION=docker
      - PLEX_CLAIM=claim-yvN9VD7W4EXjXxmTsMKi
    volumes:
      - /mnt/media/config/plex:/config
      - /mnt/media/transcode:/transcode
      - /mnt/media:/data  # Matches your original mount path
    devices:
      - /dev/dri:/dev/dri # Passes GPU access to Plex
    restart: unless-stopped

  pulse:
    image: rcourtman/pulse:latest
    container_name: pulse
    restart: unless-stopped
    ports:
      - 7655:7655
    volumes:
      - pulse_data:/data
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      - TZ=Europe/London

volumes:
  pulse_data:

